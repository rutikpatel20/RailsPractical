<%= render 'layouts/navbar'%>
<!-- Authors List Show Here -->
<div class="center flex-column">
  <h1>Author Lists</h1>
  <% if flash[:notice] %>
    <% flash.each do |name,message| %>
      <p class="text-danger"><%= message %></p>
    <% end %>
  <% end %>

  <div>
    <table class="table table-info table-striped">
      <ol class="fs-2">
        <thead class="table-secondary">
          <td class="text-center"> Name </td>
          <td class="text-center"> Birthdate </td>
          <td class="text-center"> Email </td>
          <td class="text-center"> Books </td>
        </thead>
        
        <% @authors.each do |author| %>
          <tr>
            <td> <%= link_to author.firstname + " " + author.lastname, author_path(author) %> </td>
            <td> <%= author.dob %> </td>
            <td> <%= author.email %> </td>

            <!-- To display book -->
            <td>
              <% author.books.each do |book| %>
                  <ul>
                    <li><%= link_to book.name, book_path(book) %></li>
                  </ul>
              <% end %>
            </td>

          </tr>
        <% end %>
      </ol>

    </table>
  </div>
  <div class = "d-flex justify-content-center align-items-center">

    <%= button_to "Add New Author", new_author_path, method: :get ,class:"btn-success border-0 rounded-pill shadow p-2 mx-3" %>

    <%= button_to "View all books", books_path,method: :get ,class:"btn-success border-0 rounded-pill shadow p-2" %>

  </div>
</div>
